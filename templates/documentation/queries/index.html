{% extends "documentation/index.html" %}

{% block title %}Documentation | Making Queries{% endblock %}

{% block style-before %}
    <link type="text/css" rel="stylesheet" href="{{ MEDIA_URL }}css/lib/prettify.css"/>
{% endblock %}

{% block script %}
    <script type="text/javascript" src="{{ MEDIA_URL }}js/lib/prettify.js"></script>
    <script type="text/javascript">
        $(document).observe("dom:loaded", function() {
            prettyPrint();
        })
    </script>
{% endblock %}

{% block content %}

    <article>
        <div class="a-content">
            <p class="lead">Making queries</p>

            <header>
                <p>
                    Androrm does not only provide automatic serialization/ deserialization of your models, but also gives you the opportunity, to execute complex queries on them. The only precondition to get started is, that you added all the correct <a href="{% url documentation_relational_fields %}">relational fields</a> to your models.
                </P>

                <section>
                    <p>
                        In the following examples, we assume to have the following two models set up: <code>Book</code> and <code>Author</code>.
                    </p>

                    <pre class="prettyprint linenums">{% include "documentation/queries/examples/models.java" %}</pre>

                    <p>
                        Also note, that even though the <code>objects()</code> method on the <code>Model</code> class of androrm is public, it is a good choice to have all of your models implement their own version of <code>objects()</code>, that calls the one of <code>Model</code> and hands in the correct value for the class parameter.
                    </p>

                </section>
            </header>

            <hr />

            <section>
                {% include "documentation/queries/query_sets.html" %}
            </section>

            <hr />

            <section>
                {% include "documentation/queries/filters.html" %}
            </section>

            <hr />

            <section>
                {% include "documentation/queries/relations.html" %}
            </section>

            <hr />

            <section>
                {% include "documentation/queries/ordering.html" %}
            </section>

            <hr />

            <section>
                {% include "documentation/queries/transactions.html" %}
            </section>

            <hr />

            <footer>
                <p>
                    In this section you learned, how to use the <code>objects</code> method, to construct complex queries and to limit the results by utilizing the <code>Filter</code> class. You now also know, that you can easily span relationships, by only providing the correct field names. Now go and try it yourself and if you find any bugs, report them!
                </p>
            </footer>
        </div>
    </article>

{% endblock %}

{% block menu_content %}
    <li><a href="{% url documentation_index %}">Documentation</a></li>
    <ul>
        <li>Making Queries</li>
        <ul>
            {% for category in categories %}
                <li><a href="{{ category.url }}">{{ category.name }}</a></li>
                {% if category.category_set.all %}
                    <ul>
                        {% for subcategory in category.category_set.all %}
                            <li><a href="{{ subcategory.url }}">{{ subcategory.name }}</a></li>
                        {% endfor %}
                    </ul>
                {% endif %}
            {% endfor %}
        </ul>
    </ul>
{% endblock %}